(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3be4ad3c","chunk-8c1ce26e"],{"589b":function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("flow-view",{attrs:{xmlData:t.xmlData,taskList:t.taskData}})],1)},o=[],a=i("ae3a"),r=i("d5b1"),l={name:"Flow",components:{bpmnModeler:a["a"],FlowView:r["default"]},props:{xmlData:{type:String,default:""},taskData:{type:Array,default:function(){return[]}}},data:function(){return{}}},d=l,h=i("2877"),s=Object(h["a"])(d,n,o,!1,null,null,null);e["default"]=s.exports},c02d:function(t,e,i){"use strict";i("e68f")},d5b1:function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"containers main-box"},[i("el-button",{attrs:{type:"success",size:"small",icon:"el-icon-zoom-in"},on:{click:function(e){return t.zoomViewport(!0)}}},[t._v("放大")]),i("el-button",{attrs:{type:"warning",size:"small",icon:"el-icon-zoom-out"},on:{click:function(e){return t.zoomViewport(!1)}}},[t._v("缩小")]),i("el-button",{attrs:{type:"info",size:"small",icon:"el-icon-rank"},on:{click:t.fitViewport}},[t._v("适中")]),i("div",{ref:"flowCanvas",staticClass:"canvas"})],1)},o=[],a=i("c7eb"),r=i("1da1"),l=(i("d3b7"),i("159b"),i("7db0"),i("bf4a")),d={name:"FlowView",props:{xmlData:{type:String,default:""},taskList:{type:Array,default:function(){return[]}}},data:function(){return{bpmnViewer:null}},watch:{xmlData:function(t){t&&this.getImg(t)}},mounted:function(){this.bpmnViewer&&this.bpmnViewer.destroy(),this.bpmnViewer=new l["a"]({container:this.$refs.flowCanvas,height:"calc(100vh - 200px)"}),""!=this.xmlData&&this.getImg(this.xmlData)},methods:{getImg:function(t){var e=this;return Object(r["a"])(Object(a["a"])().mark((function i(){var n;return Object(a["a"])().wrap((function(i){while(1)switch(i.prev=i.next){case 0:return n=e,i.prev=1,i.next=4,n.bpmnViewer.importXML(t);case 4:n.fitViewport(),void 0!==n.taskList&&n.taskList.length>0&&n.fillColor(),i.next=11;break;case 8:i.prev=8,i.t0=i["catch"](1),console.error(i.t0);case 11:case"end":return i.stop()}}),i,null,[[1,8]])})))()},setNodeColor:function(t,e,i){for(var n=0;n<t.length;n++)i.addMarker(t[n],e)},fitViewport:function(){this.zoom=this.bpmnViewer.get("canvas").zoom("fit-viewport","auto")},zoomViewport:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.zoom=this.bpmnViewer.get("canvas").zoom(),this.zoom+=t?.1:-.1,this.zoom>=.2&&this.bpmnViewer.get("canvas").zoom(this.zoom)},fillColor:function(){var t=this,e=this.bpmnViewer.get("canvas");this.bpmnViewer.getDefinitions().rootElements[0].flowElements.forEach((function(i){var n,o=t.taskList.find((function(t){return t.key===i.id})),a=t.taskList.find((function(t){return!t.completed})),r=t.taskList[t.taskList.length-1];if("bpmn:UserTask"===i.$type)o&&(e.addMarker(i.id,o.completed?"highlight":"highlight-todo"),null===(n=i.outgoing)||void 0===n||n.forEach((function(i){var n=t.taskList.find((function(t){return t.key===i.targetRef.id}));n&&(a&&o.key===a.key&&!a.completed?(e.addMarker(i.id,a.completed?"highlight":"highlight-todo"),e.addMarker(i.targetRef.id,a.completed?"highlight":"highlight-todo")):(e.addMarker(i.id,n.completed?"highlight":"highlight-todo"),e.addMarker(i.targetRef.id,n.completed?"highlight":"highlight-todo")))})));else if("bpmn:ExclusiveGateway"===i.$type){var l;if(o)e.addMarker(i.id,o.completed?"highlight":"highlight-todo"),null===(l=i.outgoing)||void 0===l||l.forEach((function(i){var n=t.taskList.find((function(t){return t.key===i.targetRef.id}));n&&(e.addMarker(i.id,n.completed?"highlight":"highlight-todo"),e.addMarker(i.targetRef.id,n.completed?"highlight":"highlight-todo"))}))}else if("bpmn:ParallelGateway"===i.$type){var d;if(o)e.addMarker(i.id,o.completed?"highlight":"highlight-todo"),null===(d=i.outgoing)||void 0===d||d.forEach((function(i){var n=t.taskList.find((function(t){return t.key===i.targetRef.id}));n&&(e.addMarker(i.id,n.completed?"highlight":"highlight-todo"),e.addMarker(i.targetRef.id,n.completed?"highlight":"highlight-todo"))}))}else if("bpmn:StartEvent"===i.$type)i.outgoing.forEach((function(n){var o=t.taskList.find((function(t){return t.key===n.targetRef.id}));if(o)return e.addMarker(n.id,"highlight"),void e.addMarker(i.id,"highlight")}));else if("bpmn:EndEvent"===i.$type&&r.key===i.id&&r.completed)return void e.addMarker(i.id,"highlight")}))}}},h=d,s=(i("c02d"),i("2877")),c=Object(s["a"])(h,n,o,!1,null,null,null);e["default"]=c.exports},e68f:function(t,e,i){}}]);