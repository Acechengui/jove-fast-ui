(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0059d297"],{4771:function(e,t,n){"use strict";n("99af");var o="https://lib.baomitu.com/",i="/";function a(e,t,n){return"".concat(o).concat(e,"/").concat(t,"/").concat(n)}t["a"]={beautifierUrl:a("js-beautify","1.13.5","beautifier.min.js"),monacoEditorUrl:"".concat(i,"libs/monaco-editor/vs"),tinymceUrl:a("tinymce","5.7.0","tinymce.min.js")}},"4c3b":function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var o,i=n("c88b"),a=n("5c96"),r=n.n(a),c=n("4771");function s(e){if(o)e(o);else{var t=c["a"].monacoEditorUrl,n=r.a.Loading.service({fullscreen:!0,lock:!0,text:"编辑器资源初始化中...",spinner:"el-icon-loading",background:"rgba(255, 255, 255, 0.5)"});!window.require&&(window.require={}),!window.require.paths&&(window.require.paths={}),window.require.paths.vs=t,Object(i["a"])("".concat(t,"/loader.js"),(function(){window.require(["vs/editor/editor.main"],(function(){n.close(),o=window.monaco,e(o)}))}))}}},"71f5":function(e,t,n){"use strict";n("cdb1")},ad7f:function(e,t,n){"use strict";n.r(t);var o,i,a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-drawer",e._g(e._b({on:{opened:e.onOpen,close:e.onClose}},"el-drawer",e.$attrs,!1),e.$listeners),[n("div",{staticClass:"action-bar",style:{"text-align":"left"}},[n("span",{staticClass:"bar-btn",on:{click:e.refresh}},[n("i",{staticClass:"el-icon-refresh"}),e._v(" 刷新 ")]),n("span",{ref:"copyBtn",staticClass:"bar-btn copy-json-btn"},[n("i",{staticClass:"el-icon-document-copy"}),e._v(" 复制JSON ")]),n("span",{staticClass:"bar-btn",on:{click:e.exportJsonFile}},[n("i",{staticClass:"el-icon-download"}),e._v(" 导出JSON文件 ")]),n("span",{staticClass:"bar-btn delete-btn",on:{click:function(t){return e.$emit("update:visible",!1)}}},[n("i",{staticClass:"el-icon-circle-close"}),e._v(" 关闭 ")])]),n("div",{staticClass:"json-editor",attrs:{id:"editorJson"}})])],1)},r=[],c=n("ed08"),s=n("b311"),u=n.n(s),l=n("21a6"),d=n("4c3b"),f=n("b3ae"),b={components:{},props:{jsonStr:{type:String,required:!0}},data:function(){return{}},computed:{},watch:{},created:function(){},mounted:function(){var e=this;window.addEventListener("keydown",this.preventDefaultSave);var t=new u.a(".copy-json-btn",{text:function(t){return e.$notify({title:"成功",message:"代码已复制到剪切板，可粘贴。",type:"success"}),e.beautifierJson}});t.on("error",(function(t){e.$message.error("代码复制失败")}))},beforeDestroy:function(){window.removeEventListener("keydown",this.preventDefaultSave)},methods:{preventDefaultSave:function(e){"s"===e.key&&(e.metaKey||e.ctrlKey)&&e.preventDefault()},onOpen:function(){var e=this;Object(f["a"])((function(t){o=t,e.beautifierJson=o.js(e.jsonStr,c["b"].js),Object(d["a"])((function(t){i=t,e.setEditorValue("editorJson",e.beautifierJson)}))}))},onClose:function(){},setEditorValue:function(e,t){var n=this;this.jsonEditor?this.jsonEditor.setValue(t):(this.jsonEditor=i.editor.create(document.getElementById(e),{value:t,theme:"vs-dark",language:"json",automaticLayout:!0}),this.jsonEditor.onKeyDown((function(e){49===e.keyCode&&(e.metaKey||e.ctrlKey)&&n.refresh()})))},exportJsonFile:function(){var e=this;this.$prompt("文件名:","导出文件",{inputValue:"".concat(+new Date,".json"),closeOnClickModal:!1,inputPlaceholder:"请输入文件名"}).then((function(t){var n=t.value;n||(n="".concat(+new Date,".json"));var o=e.jsonEditor.getValue(),i=new Blob([o],{type:"text/plain;charset=utf-8"});Object(l["saveAs"])(i,n)}))},refresh:function(){try{this.$emit("refresh",JSON.parse(this.jsonEditor.getValue()))}catch(e){this.$notify({title:"错误",message:"JSON格式错误，请检查",type:"error"})}}}},p=b,v=(n("71f5"),n("2877")),h=Object(v["a"])(p,a,r,!1,null,"b6fde942",null);t["default"]=h.exports},b3ae:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var o,i=n("c88b"),a=n("5c96"),r=n.n(a),c=n("4771");function s(e){var t=c["a"].beautifierUrl;if(o)e(o);else{var n=r.a.Loading.service({fullscreen:!0,lock:!0,text:"格式化资源加载中...",spinner:"el-icon-loading",background:"rgba(255, 255, 255, 0.5)"});Object(i["a"])(t,(function(){n.close(),o=beautifier,e(o)}))}}},c88b:function(e,t,n){"use strict";n("14d9"),n("d3b7"),n("159b"),n("d9e2");var o={};function i(e,t){var n=document.getElementById(e),i=t||function(){};if(!n){o[e]=[];var a=document.createElement("script");a.src=e,a.id=e,a.async=1,document.body.appendChild(a);var r="onload"in a?c.bind(a):s.bind(a);r(a)}function c(t){var n=this;t.onload=function(){n.onerror=n.onload=null,o[e].forEach((function(e){e(null,t)})),delete o[e]},t.onerror=function(){n.onerror=n.onload=null,i(new Error("Failed to load ".concat(e)),t)}}function s(t){var n=this;t.onreadystatechange=function(){"complete"!==n.readyState&&"loaded"!==n.readyState||(n.onreadystatechange=null,o[e].forEach((function(e){e(null,t)})),delete o[e])}}o[e].push(i)}t["a"]=i},cdb1:function(e,t,n){}}]);