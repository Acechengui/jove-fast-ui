(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-34e8ea56","chunk-3be4ad3c","chunk-8c1ce26e"],{"01b2":function(t,e,a){},1538:function(t,e,a){"use strict";a.d(e,"e",(function(){return r})),a.d(e,"a",(function(){return o})),a.d(e,"d",(function(){return i})),a.d(e,"h",(function(){return s})),a.d(e,"f",(function(){return l})),a.d(e,"c",(function(){return c})),a.d(e,"g",(function(){return u})),a.d(e,"b",(function(){return d}));var n=a("b775");function r(t){return Object(n["a"])({url:"/flowable/definition/list",method:"get",params:t})}function o(t,e){return Object(n["a"])({url:"/flowable/definition/start/"+t,method:"post",data:e})}function i(t){return Object(n["a"])({url:"/flowable/task/processVariables/"+t,method:"get"})}function s(t){return Object(n["a"])({url:"/flowable/definition/updateState",method:"put",params:t})}function l(t){return Object(n["a"])({url:"/flowable/definition/readXml/"+t,method:"get"})}function c(t,e){return Object(n["a"])({url:"/flowable/task/flowViewer/"+t+"/"+e,method:"get"})}function u(t){return Object(n["a"])({url:"/flowable/definition/save",method:"post",data:t})}function d(t){return Object(n["a"])({url:"/flowable/definition/delete/"+t,method:"delete"})}},2638:function(t,e,a){"use strict";function n(){return n=Object.assign?Object.assign.bind():function(t){for(var e,a=1;a<arguments.length;a++)for(var n in e=arguments[a],e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t},n.apply(this,arguments)}var r=["attrs","props","domProps"],o=["class","style","directives"],i=["on","nativeOn"],s=function(t){return t.reduce((function(t,e){for(var a in e)if(t[a])if(-1!==r.indexOf(a))t[a]=n({},t[a],e[a]);else if(-1!==o.indexOf(a)){var s=t[a]instanceof Array?t[a]:[t[a]],c=e[a]instanceof Array?e[a]:[e[a]];t[a]=[].concat(s,c)}else if(-1!==i.indexOf(a))for(var u in e[a])if(t[a][u]){var d=t[a][u]instanceof Array?t[a][u]:[t[a][u]],f=e[a][u]instanceof Array?e[a][u]:[e[a][u]];t[a][u]=[].concat(d,f)}else t[a][u]=e[a][u];else if("hook"===a)for(var m in e[a])t[a][m]=t[a][m]?l(t[a][m],e[a][m]):e[a][m];else t[a]=e[a];else t[a]=e[a];return t}),{})},l=function(t,e){return function(){t&&t.apply(this,arguments),e&&e.apply(this,arguments)}};t.exports=s},"589b":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("flow-view",{attrs:{xmlData:t.xmlData,taskList:t.taskData}})],1)},r=[],o=a("ae3a"),i=a("d5b1"),s={name:"Flow",components:{bpmnModeler:o["a"],FlowView:i["default"]},props:{xmlData:{type:String,default:""},taskData:{type:Array,default:function(){return[]}}},data:function(){return{}}},l=s,c=a("2877"),u=Object(c["a"])(l,n,r,!1,null,null,null);e["default"]=u.exports},"6e55":function(t,e,a){"use strict";a.d(e,"b",(function(){return r})),a.d(e,"c",(function(){return o})),a.d(e,"a",(function(){return i}));var n=a("b775");function r(t){return Object(n["a"])({url:"/flowable/task/finishedList",method:"get",params:t})}function o(t){return Object(n["a"])({url:"/flowable/task/flowRecord",method:"get",params:t})}function i(t){return Object(n["a"])({url:"/flowable/instance/delete/?instanceId="+t,method:"delete"})}},"817e":function(t,e,a){"use strict";a("01b2")},9718:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container"},[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",{staticClass:"el-icon-document"},[t._v("基础信息")]),a("el-button",{staticStyle:{float:"right"},attrs:{type:"primary"},on:{click:t.goBack}},[t._v("返回")])],1),t.variableOpen?a("el-col",{attrs:{span:16,offset:6}},[a("div",[a("parser",{key:(new Date).getTime(),attrs:{"form-conf":t.variablesData}})],1),t.fileDisplay?a("div",{staticStyle:{"margin-left":"2%","margin-bottom":"20px"}},[t.fileList?a("el-tag",{attrs:{type:"success",effect:"plain"}},[t._v("附件列表:")]):t._e(),a("el-upload",{attrs:{"on-preview":t.handleFilePreview,"file-list":t.fileList}})],1):t._e(),"true"===t.finished?a("div",{staticStyle:{"margin-left":"10%","margin-bottom":"20px","font-size":"14px"}},[a("el-button",{attrs:{icon:"el-icon-edit-outline",type:"success",size:"mini"},on:{click:t.handleComplete}},[t._v("审批")]),a("el-button",{attrs:{icon:"el-icon-refresh-left",type:"warning",size:"mini"},on:{click:t.handleReturn}},[t._v("退回")]),a("el-button",{attrs:{icon:"el-icon-circle-close",type:"danger",size:"mini"},on:{click:t.handleReject}},[t._v("驳回")])],1):t._e()]):t._e(),t.formConfOpen?a("el-col",{attrs:{span:16,offset:4}},[a("div",{staticClass:"key-form"},[a("parser",{key:(new Date).getTime(),ref:"parser",attrs:{"form-conf":t.formConf},on:{submit:t.submitForm,getData:t.getData}})],1)]):t._e()],1),t.flowRecordList?a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",{staticClass:"el-icon-notebook-1"},[t._v("审批记录")])]),a("el-col",{attrs:{span:16,offset:4}},[a("div",{staticClass:"block"},[a("el-timeline",t._l(t.flowRecordList,(function(e,n){return a("el-timeline-item",{key:n,attrs:{icon:t.setIcon(e.finishTime),color:t.setColor(e.finishTime)}},[a("p",{staticStyle:{"font-weight":"700"}},[t._v(t._s(e.taskName))]),a("el-card",{attrs:{"body-style":{padding:"10px"}}},[a("el-descriptions",{staticClass:"margin-top",attrs:{column:1,size:"small",border:""}},[e.assigneeName?a("el-descriptions-item",{attrs:{"label-class-name":"my-label"}},[a("template",{slot:"label"},[a("i",{staticClass:"el-icon-user"}),t._v("实际办理")]),t._v(" "+t._s(e.assigneeName)+" "),e.deptName?a("el-tag",{attrs:{type:"info",size:"mini"}},[t._v(t._s(e.deptName))]):t._e()],2):t._e(),e.candidate?a("el-descriptions-item",{attrs:{"label-class-name":"my-label"}},[a("template",{slot:"label"},[a("i",{staticClass:"el-icon-user"}),t._v("候选办理")]),t._v(" "+t._s(e.candidate)+" ")],2):t._e(),a("el-descriptions-item",{attrs:{"label-class-name":"my-label"}},[a("template",{slot:"label"},[a("i",{staticClass:"el-icon-date"}),t._v("接收时间")]),t._v(" "+t._s(e.createTime)+" ")],2),e.finishTime?a("el-descriptions-item",{attrs:{"label-class-name":"my-label"}},[a("template",{slot:"label"},[a("i",{staticClass:"el-icon-date"}),t._v("处理时间")]),t._v(" "+t._s(e.finishTime)+" ")],2):t._e(),e.duration?a("el-descriptions-item",{attrs:{"label-class-name":"my-label"}},[a("template",{slot:"label"},[a("i",{staticClass:"el-icon-time"}),t._v("耗时")]),t._v(" "+t._s(e.duration)+" ")],2):t._e(),e.comment?a("el-descriptions-item",{attrs:{"label-class-name":"my-label"}},[a("template",{slot:"label"},[a("i",{staticClass:"el-icon-tickets"}),t._v("处理意见")]),t._v(" "+t._s(e.comment.comment)+" ")],2):t._e()],1)],1)],1)})),1)],1)])],1):t._e(),a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",{staticClass:"el-icon-picture-outline"},[t._v("流程图")])]),a("flow",{attrs:{xmlData:t.xmlData,taskData:t.taskList}})],1),a("el-dialog",{attrs:{title:t.completeTitle,visible:t.completeOpen,width:t.checkSendUser?"60%":"40%","append-to-body":""},on:{"update:visible":function(e){t.completeOpen=e}}},[a("el-form",{ref:"taskForm",attrs:{model:t.taskForm,"label-width":"80px"}},[t.checkSendUser?a("el-form-item",{attrs:{prop:"targetKey"}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:6,xs:24}},[a("h6",[t._v("部门列表")]),a("div",{staticClass:"head-container"},[a("el-input",{staticStyle:{"margin-bottom":"20px"},attrs:{placeholder:"请输入部门名称",clearable:"",size:"small","prefix-icon":"el-icon-search"},model:{value:t.deptName,callback:function(e){t.deptName=e},expression:"deptName"}})],1),a("div",{staticClass:"head-container"},[a("el-tree",{ref:"tree",attrs:{data:t.deptOptions,props:t.defaultProps,"expand-on-click-node":!1,"filter-node-method":t.filterNode,"highlight-current":""},on:{"node-click":t.handleNodeClick}})],1)]),a("el-col",{attrs:{span:10,xs:24}},[a("h6",[t._v("待选人员")]),a("el-table",{ref:"singleTable",staticStyle:{width:"100%"},attrs:{data:t.userList,border:""},on:{"selection-change":t.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"50",align:"center"}}),a("el-table-column",{attrs:{label:"用户名",align:"center",prop:"nickName"}}),a("el-table-column",{attrs:{label:"部门",align:"center",prop:"dept.deptName"}})],1),a("pagination",{directives:[{name:"show",rawName:"v-show",value:t.total>0,expression:"total>0"}],attrs:{total:t.total,page:t.queryParams.pageNum,limit:t.queryParams.pageSize},on:{"update:page":function(e){return t.$set(t.queryParams,"pageNum",e)},"update:limit":function(e){return t.$set(t.queryParams,"pageSize",e)},pagination:t.getList}})],1),a("el-col",{attrs:{span:8,xs:24}},[a("h6",[t._v("已选人员")]),t._l(t.userData,(function(e,n){return a("el-tag",{key:n,attrs:{closable:""},on:{close:function(a){return t.handleClose(e)}}},[t._v(" "+t._s(e.nickName)+" "+t._s(e.dept.deptName)+" ")])}))],2)],1)],1):t._e(),a("el-form-item",{attrs:{label:"处理意见",prop:"comment",rules:[{required:!0,message:"请输入处理意见",trigger:"blur"}]}},[a("el-input",{attrs:{type:"textarea",placeholder:"请输入处理意见"},model:{value:t.taskForm.comment,callback:function(e){t.$set(t.taskForm,"comment",e)},expression:"taskForm.comment"}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.completeOpen=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.taskComplete}},[t._v("确 定")])],1)],1),a("el-dialog",{attrs:{title:t.returnTitle,visible:t.returnOpen,width:"40%","append-to-body":""},on:{"update:visible":function(e){t.returnOpen=e}}},[a("el-form",{ref:"taskForm",attrs:{model:t.taskForm,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"退回节点",prop:"targetKey"}},[a("el-radio-group",{model:{value:t.taskForm.targetKey,callback:function(e){t.$set(t.taskForm,"targetKey",e)},expression:"taskForm.targetKey"}},t._l(t.returnTaskList,(function(e){return a("el-radio-button",{key:e.id,attrs:{label:e.id}},[t._v(t._s(e.name)+" ")])})),1)],1),a("el-form-item",{attrs:{label:"退回意见",prop:"comment",rules:[{required:!0,message:"请输入意见",trigger:"blur"}]}},[a("el-input",{staticStyle:{width:"50%"},attrs:{type:"textarea",placeholder:"请输入意见"},model:{value:t.taskForm.comment,callback:function(e){t.$set(t.taskForm,"comment",e)},expression:"taskForm.comment"}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.returnOpen=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.taskReturn}},[t._v("确 定")])],1)],1),a("el-dialog",{attrs:{title:t.rejectTitle,visible:t.rejectOpen,width:"40%","append-to-body":""},on:{"update:visible":function(e){t.rejectOpen=e}}},[a("el-form",{ref:"taskForm",attrs:{model:t.taskForm,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"驳回意见",prop:"comment",rules:[{required:!0,message:"请输入意见",trigger:"blur"}]}},[a("el-input",{staticStyle:{width:"50%"},attrs:{type:"textarea",placeholder:"请输入意见"},model:{value:t.taskForm.comment,callback:function(e){t.$set(t.taskForm,"comment",e)},expression:"taskForm.comment"}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.rejectOpen=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.taskReject}},[t._v("确 定")])],1)],1),a("GoTop")],1)},r=[],o=(a("4de4"),a("d3b7"),a("d81d"),a("ddb0"),a("a15b"),a("a434"),a("b0c0"),a("159b"),a("14d9"),a("e9c4"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"goTop"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.goTopShow,expression:"goTopShow"}],staticClass:"goTop",attrs:{title:"返回顶部",alt:"返回顶部"},on:{click:t.goTop}})])}),i=[],s={name:"goTop",data:function(){return{scrollTop:"",goTopShow:!1}},watch:{scrollTop:function(t){this.scrollTop>500?this.goTopShow=!0:this.goTopShow=!1}},methods:{handleScroll:function(){this.scrollTop=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop,this.scrollTop>500&&(this.goTopShow=!0)},goTop:function(){var t=null,e=this;cancelAnimationFrame(t),t=requestAnimationFrame((function a(){e.scrollTop>0?(e.scrollTop-=50,document.body.scrollTop=document.documentElement.scrollTop=e.scrollTop,t=requestAnimationFrame(a)):(cancelAnimationFrame(t),e.goTopShow=!1)}))}},mounted:function(){window.addEventListener("scroll",this.handleScroll)},destroyed:function(){window.removeEventListener("scroll",this.handleScroll)}},l=s,c=(a("9ed6"),a("2877")),u=Object(c["a"])(l,o,i,!1,null,"093d1ff9",null),d=u.exports,f=a("6e55"),m=a("9f75"),h=a("1538"),p=a("e099"),g=a("589b"),b=(a("542c"),a("ca17")),k=a.n(b),v=a("c0c7"),y={name:"Record",components:{Parser:m["a"],flow:g["default"],Treeselect:k.a,GoTop:d},props:{},data:function(){return{xmlData:"",taskList:[],deptName:void 0,deptOptions:void 0,userList:null,defaultProps:{children:"children",label:"label"},queryParams:{deptId:void 0},loading:!0,flowRecordList:[],formConfCopy:{},src:null,rules:{},variablesForm:{},taskForm:{returnTaskShow:!1,delegateTaskShow:!1,defaultTaskShow:!0,sendUserShow:!1,multiple:!1,comment:"",procInsId:"",instanceId:"",deployId:"",taskId:"",procDefId:"",vars:"",targetKey:""},userDataList:[],assignee:null,formConf:{},formConfOpen:!1,variables:[],variablesData:{},variableOpen:!1,fileDisplay:!1,fileList:[],returnTaskList:[],finished:"false",completeTitle:null,completeOpen:!1,returnTitle:null,returnOpen:!1,rejectOpen:!1,rejectTitle:null,userData:[],checkSendUser:!1}},watch:{deptName:function(t){this.$refs.tree.filter(t)}},created:function(){this.$modal.loading("正在加载数据中，请稍候..."),this.taskForm.deployId=this.$route.query&&this.$route.query.deployId,this.taskForm.taskId=this.$route.query&&this.$route.query.taskId,this.taskForm.procInsId=this.$route.query&&this.$route.query.procInsId,this.taskForm.executionId=this.$route.query&&this.$route.query.executionId,this.taskForm.instanceId=this.$route.query&&this.$route.query.procInsId,this.taskForm.procDefId=this.$route.query&&this.$route.query.procDefId,this.getFlowViewer(this.taskForm.procInsId,this.taskForm.executionId),this.getModelDetail(this.taskForm.deployId),this.taskForm.taskId&&(this.processVariables(this.taskForm.taskId),this.getNextFlowNode(this.taskForm.taskId),this.taskForm.deployId=null),this.getFlowRecordList(this.taskForm.procInsId,this.taskForm.deployId),this.finished=this.$route.query&&this.$route.query.finished,this.$modal.closeLoading()},methods:{getTreeselect:function(){var t=this;Object(v["d"])().then((function(e){t.deptOptions=e.data}))},getList:function(){var t=this;Object(v["h"])(this.addDateRange(this.queryParams,this.dateRange)).then((function(e){t.userList=e.rows,t.total=e.total}))},filterNode:function(t,e){return!t||-1!==e.label.indexOf(t)},handleNodeClick:function(t){this.queryParams.deptId=t.id,this.getList()},getModelDetail:function(t){var e=this;Object(h["f"])(t).then((function(t){e.xmlData=t.data}))},getFlowViewer:function(t,e){var a=this;Object(h["c"])(t,e).then((function(t){a.taskList=t.data}))},setIcon:function(t){return t?"el-icon-check":"el-icon-time"},setColor:function(t){return t?"#2bc418":"#b3bdbb"},handleSelectionChange:function(t){if(t){this.userData=t;var e=t.map((function(t){return t.userId}));this.taskForm.values=e instanceof Array?{approval:e.join(",")}:{approval:e}}},handleClose:function(t){this.userData.splice(this.userData.indexOf(t),1),this.$refs.singleTable.toggleRowSelection(t,!1)},handleCheckChange:function(t){this.taskForm.values=t instanceof Array?{approval:t.join(",")}:{approval:t}},getFlowRecordList:function(t,e){var a=this,n={procInsId:t,deployId:e};Object(f["c"])(n).then((function(t){a.flowRecordList=t.data.flowList,t.data.formData&&(a.formConf=t.data.formData,a.formConfOpen=!0)})).catch((function(t){a.goBack()}))},handleFilePreview:function(t){var e=document.createElement("a"),a=new MouseEvent("click");e.target="_blank",e.download=t.name,e.href=t.url,e.dispatchEvent(a)},fillFormData:function(t,e){var a=this;t.forEach((function(t,n){var r=t.__config__.defaultValue;"el-upload"===t.__config__.tag&&(a.fileDisplay=!0,"text"!=t["list-type"]?(a.fileList=[],t["file-list"]=JSON.parse(r)):(a.fileList=JSON.parse(r),t["file-list"]=[])),r&&(t.__config__.defaultValue=r),Array.isArray(t.__config__.children)&&a.fillFormData(t.__config__.children,e)}))},processVariables:function(t){var e=this;t&&Object(h["d"])(t).then((function(t){e.variablesData=t.data.variables,e.fillFormData(e.variablesData.fields,e.variablesData),e.variableOpen=!0}))},getNextFlowNode:function(t){var e=this,a={taskId:t};Object(p["c"])(a).then((function(t){var a=t.data;a&&(e.checkSendUser=!0,"assignee"===a.type?e.userDataList=t.data.userList:"candidateUsers"===a.type?(e.userDataList=t.data.userList,e.taskForm.multiple=!0):"candidateGroups"===a.type?(t.data.roleList.forEach((function(t){t.userId=t.roleId,t.nickName=t.roleName})),e.userDataList=t.data.roleList,e.taskForm.multiple=!1):"multiInstance"===a.type?(e.userDataList=t.data.userList,e.taskForm.multiple=!0):"fixed"===a.type&&(e.checkSendUser=!1))}))},handleComplete:function(){this.completeOpen=!0,this.completeTitle="审批流程",this.getTreeselect()},taskComplete:function(){var t=this;this.taskForm.values||!this.checkSendUser?this.taskForm.comment?Object(p["a"])(this.taskForm).then((function(e){t.$modal.msgSuccess(e.msg),t.goBack()})):this.msgError("请输入审批意见"):this.msgError("请选择流程接收人员")},handleDelegate:function(){this.taskForm.delegateTaskShow=!0,this.taskForm.defaultTaskShow=!1},handleAssign:function(){},goBack:function(){this.$store.dispatch("tagsView/delView",this.$route),this.$router.go(-1)},getData:function(t){if(t){var e=[];t.fields.forEach((function(t){var a={};if(a.label=t.__config__.label,t.__config__.defaultValue instanceof Array){var n=[];t.__config__.defaultValue.forEach((function(t){n.push(t)})),a.val=n}else a.val=t.__config__.defaultValue;e.push(a)})),this.variables=e}},submitForm:function(t){var e=this;if(t){var a=t.valData,n=t.formData;n.disabled=!0,n.formBtns=!1,this.taskForm.procDefId&&(a.variables=n,Object(h["a"])(this.taskForm.procDefId,JSON.stringify(a)).then((function(t){e.$modal.msgSuccess(t.msg),e.goBack()})))}},handleReject:function(){this.rejectOpen=!0,this.rejectTitle="驳回流程"},taskReject:function(){var t=this;this.$refs["taskForm"].validate((function(e){e&&Object(p["d"])(t.taskForm).then((function(e){t.$modal.msgSuccess(e.msg),t.goBack()}))}))},handleReturn:function(){var t=this;this.returnOpen=!0,this.returnTitle="退回流程",Object(p["e"])(this.taskForm).then((function(e){t.returnTaskList=e.data,t.taskForm.values=null}))},taskReturn:function(){var t=this;this.$refs["taskForm"].validate((function(e){e&&Object(p["f"])(t.taskForm).then((function(e){t.$modal.msgSuccess(e.msg),t.goBack()}))}))},cancelTask:function(){this.taskForm.returnTaskShow=!1,this.taskForm.defaultTaskShow=!0,this.taskForm.sendUserShow=!0,this.returnTaskList=[]},submitDeleteTask:function(){var t=this;this.$refs["taskForm"].validate((function(e){e&&Object(p["b"])(t.taskForm).then((function(e){t.$modal.msgSuccess(e.msg),t.goBack()}))}))},cancelDelegateTask:function(){this.taskForm.delegateTaskShow=!1,this.taskForm.defaultTaskShow=!0,this.taskForm.sendUserShow=!0,this.returnTaskList=[]}}},w=y,_=(a("817e"),Object(c["a"])(w,n,r,!1,null,"3958ba32",null));e["default"]=_.exports},9977:function(t,e,a){var n={"./el-button.js":"aace","./el-checkbox-group.js":"9413","./el-input.js":"167d","./el-radio-group.js":"2cfa","./el-select.js":"7f29","./el-upload.js":"0f88"};function r(t){var e=o(t);return a(e)}function o(t){if(!a.o(n,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return n[t]}r.keys=function(){return Object.keys(n)},r.resolve=o,t.exports=r,r.id="9977"},"9ed6":function(t,e,a){"use strict";a("e3cd")},c02d:function(t,e,a){"use strict";a("e68f")},c0c7:function(t,e,a){"use strict";a.d(e,"h",(function(){return o})),a.d(e,"i",(function(){return i})),a.d(e,"f",(function(){return s})),a.d(e,"a",(function(){return l})),a.d(e,"l",(function(){return c})),a.d(e,"c",(function(){return u})),a.d(e,"j",(function(){return d})),a.d(e,"b",(function(){return f})),a.d(e,"g",(function(){return m})),a.d(e,"m",(function(){return h})),a.d(e,"n",(function(){return p})),a.d(e,"o",(function(){return g})),a.d(e,"e",(function(){return b})),a.d(e,"k",(function(){return k})),a.d(e,"d",(function(){return v}));var n=a("b775"),r=a("ec29");function o(t){return Object(n["a"])({url:"/system/user/list",method:"get",params:t})}function i(t){return Object(n["a"])({url:"/system/user/alllist",method:"get",params:t})}function s(t){return Object(n["a"])({url:"/system/user/"+Object(r["g"])(t),method:"get"})}function l(t){return Object(n["a"])({url:"/system/user",method:"post",data:t})}function c(t){return Object(n["a"])({url:"/system/user",method:"put",data:t})}function u(t){return Object(n["a"])({url:"/system/user/"+t,method:"delete"})}function d(t,e){var a={userId:t,password:e};return Object(n["a"])({url:"/system/user/resetPwd",method:"put",data:a})}function f(t,e){var a={userId:t,status:e};return Object(n["a"])({url:"/system/user/changeStatus",method:"put",data:a})}function m(){return Object(n["a"])({url:"/system/user/profile",method:"get"})}function h(t){return Object(n["a"])({url:"/system/user/profile",method:"put",data:t})}function p(t,e){var a={oldPassword:t,newPassword:e};return Object(n["a"])({url:"/system/user/profile/updatePwd",method:"put",params:a})}function g(t){return Object(n["a"])({url:"/system/user/profile/avatar",method:"post",data:t})}function b(t){return Object(n["a"])({url:"/system/user/authRole/"+t,method:"get"})}function k(t){return Object(n["a"])({url:"/system/user/authRole",method:"put",params:t})}function v(){return Object(n["a"])({url:"/system/user/deptTree",method:"get"})}},d5b1:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"containers main-box"},[a("el-button",{attrs:{type:"success",size:"small",icon:"el-icon-zoom-in"},on:{click:function(e){return t.zoomViewport(!0)}}},[t._v("放大")]),a("el-button",{attrs:{type:"warning",size:"small",icon:"el-icon-zoom-out"},on:{click:function(e){return t.zoomViewport(!1)}}},[t._v("缩小")]),a("el-button",{attrs:{type:"info",size:"small",icon:"el-icon-rank"},on:{click:t.fitViewport}},[t._v("适中")]),a("div",{ref:"flowCanvas",staticClass:"canvas"})],1)},r=[],o=a("c7eb"),i=a("1da1"),s=(a("d3b7"),a("159b"),a("7db0"),a("bf4a")),l={name:"FlowView",props:{xmlData:{type:String,default:""},taskList:{type:Array,default:function(){return[]}}},data:function(){return{bpmnViewer:null}},watch:{xmlData:function(t){t&&this.getImg(t)}},mounted:function(){this.bpmnViewer&&this.bpmnViewer.destroy(),this.bpmnViewer=new s["a"]({container:this.$refs.flowCanvas,height:"calc(100vh - 200px)"}),""!=this.xmlData&&this.getImg(this.xmlData)},methods:{getImg:function(t){var e=this;return Object(i["a"])(Object(o["a"])().mark((function a(){var n;return Object(o["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return n=e,a.prev=1,a.next=4,n.bpmnViewer.importXML(t);case 4:n.fitViewport(),void 0!==n.taskList&&n.taskList.length>0&&n.fillColor(),a.next=11;break;case 8:a.prev=8,a.t0=a["catch"](1),console.error(a.t0);case 11:case"end":return a.stop()}}),a,null,[[1,8]])})))()},setNodeColor:function(t,e,a){for(var n=0;n<t.length;n++)a.addMarker(t[n],e)},fitViewport:function(){this.zoom=this.bpmnViewer.get("canvas").zoom("fit-viewport","auto")},zoomViewport:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.zoom=this.bpmnViewer.get("canvas").zoom(),this.zoom+=t?.1:-.1,this.zoom>=.2&&this.bpmnViewer.get("canvas").zoom(this.zoom)},fillColor:function(){var t=this,e=this.bpmnViewer.get("canvas");this.bpmnViewer.getDefinitions().rootElements[0].flowElements.forEach((function(a){var n,r=t.taskList.find((function(t){return t.key===a.id})),o=t.taskList.find((function(t){return!t.completed})),i=t.taskList[t.taskList.length-1];if("bpmn:UserTask"===a.$type)r&&(e.addMarker(a.id,r.completed?"highlight":"highlight-todo"),null===(n=a.outgoing)||void 0===n||n.forEach((function(a){var n=t.taskList.find((function(t){return t.key===a.targetRef.id}));n&&(o&&r.key===o.key&&!o.completed?(e.addMarker(a.id,o.completed?"highlight":"highlight-todo"),e.addMarker(a.targetRef.id,o.completed?"highlight":"highlight-todo")):(e.addMarker(a.id,n.completed?"highlight":"highlight-todo"),e.addMarker(a.targetRef.id,n.completed?"highlight":"highlight-todo")))})));else if("bpmn:ExclusiveGateway"===a.$type){var s;if(r)e.addMarker(a.id,r.completed?"highlight":"highlight-todo"),null===(s=a.outgoing)||void 0===s||s.forEach((function(a){var n=t.taskList.find((function(t){return t.key===a.targetRef.id}));n&&(e.addMarker(a.id,n.completed?"highlight":"highlight-todo"),e.addMarker(a.targetRef.id,n.completed?"highlight":"highlight-todo"))}))}else if("bpmn:ParallelGateway"===a.$type){var l;if(r)e.addMarker(a.id,r.completed?"highlight":"highlight-todo"),null===(l=a.outgoing)||void 0===l||l.forEach((function(a){var n=t.taskList.find((function(t){return t.key===a.targetRef.id}));n&&(e.addMarker(a.id,n.completed?"highlight":"highlight-todo"),e.addMarker(a.targetRef.id,n.completed?"highlight":"highlight-todo"))}))}else if("bpmn:StartEvent"===a.$type)a.outgoing.forEach((function(n){var r=t.taskList.find((function(t){return t.key===n.targetRef.id}));if(r)return e.addMarker(n.id,"highlight"),void e.addMarker(a.id,"highlight")}));else if("bpmn:EndEvent"===a.$type&&i.key===a.id&&i.completed)return void e.addMarker(a.id,"highlight")}))}}},c=l,u=(a("c02d"),a("2877")),d=Object(u["a"])(c,n,r,!1,null,null,null);e["default"]=d.exports},e099:function(t,e,a){"use strict";a.d(e,"g",(function(){return r})),a.d(e,"a",(function(){return o})),a.d(e,"b",(function(){return i})),a.d(e,"f",(function(){return s})),a.d(e,"d",(function(){return l})),a.d(e,"e",(function(){return c})),a.d(e,"c",(function(){return u}));var n=a("b775");function r(t){return Object(n["a"])({url:"/flowable/task/todoList",method:"get",params:t})}function o(t){return Object(n["a"])({url:"/flowable/task/complete",method:"post",data:t})}function i(t){return Object(n["a"])({url:"/flowable/task/delegate",method:"post",data:t})}function s(t){return Object(n["a"])({url:"/flowable/task/return",method:"post",data:t})}function l(t){return Object(n["a"])({url:"/flowable/task/reject",method:"post",data:t})}function c(t){return Object(n["a"])({url:"/flowable/task/returnList",method:"post",data:t})}function u(t){return Object(n["a"])({url:"/flowable/task/nextFlowNode",method:"post",data:t})}},e3cd:function(t,e,a){},e68f:function(t,e,a){}}]);